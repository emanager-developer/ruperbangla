import{r as w,O as y,P as S,R as I,S as c,j as e,_ as L,l as _}from"./index-BSZQSoAt.js";function D(){const[s,u]=w.useState([]),{data:x}=y(),a=x==null?void 0:x.data,n=a==null?void 0:a._id,[b,{isLoading:f,isSuccess:j,isError:p,error:d}]=S(),[N,{isLoading:g,isSuccess:v,isError:h,error:l}]=I(),F=async r=>{var o,m;if(r.preventDefault(),s.length<=0)return c.fire("","Image is required","warning");const t=new FormData;t.append("icon",(o=s[0])==null?void 0:o.file);try{n?await N({id:n,formData:t}):await b(t)}catch(i){c.fire("",((m=i==null?void 0:i.data)==null?void 0:m.error)||"Something went wrong","error")}};return w.useEffect(()=>{var r,t;p||h?c.fire("",p&&((r=d==null?void 0:d.data)==null?void 0:r.error)||h&&((t=l==null?void 0:l.data)==null?void 0:t.error)||"Something went wrong","error"):j?(u([]),c.fire("","Favicon added successfully","success")):v&&(u([]),c.fire("","Favicon updated successfully","success"))},[p,d,j,h,l,v]),e.jsxs("section",{className:"rounded bg-base-100 shadow",children:[e.jsx("div",{className:"flex items-center justify-between border-b p-4 font-medium text-neutral",children:e.jsx("h3",{children:n?"Update Favicon":"Add Favicon"})}),e.jsxs("form",{onSubmit:F,className:"p-4",children:[e.jsxs("div",{className:"w-full md:w-1/2",children:[e.jsx("p",{className:"mb-1",children:"Icon"}),e.jsx("div",{children:e.jsx(L,{value:s,onChange:r=>u(r),dataURLKey:"data_url",children:({onImageUpload:r,onImageRemove:t,dragProps:o})=>e.jsxs("div",{className:"items-center gap-10 rounded border border-dashed p-4 md:flex",...o,children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{onClick:r,className:"w-max cursor-pointer rounded-2xl bg-primary px-4 py-1.5 text-sm text-base-100",children:"Choose Image"}),e.jsx("p",{className:"text-neutral-content",children:"or Drop here"})]}),e.jsx("div",{className:`${(s==null?void 0:s.length)>0&&"mt-4"} `,children:s==null?void 0:s.map((m,i)=>e.jsxs("div",{className:"image-item relative",children:[e.jsx("img",{src:m.data_url,alt:"",className:"h-20 w-32"}),e.jsx("div",{onClick:()=>t(i),className:"absolute right-0 top-0 flex h-7 w-7 cursor-pointer items-center justify-center rounded-full bg-primary text-base-100",children:e.jsx(_,{})})]},i))})]})})})]}),e.jsx("div",{className:"mt-4",children:(a==null?void 0:a.icon)&&e.jsx("img",{src:`https://www.api.ruperbangla.com/${a==null?void 0:a.icon}`,alt:"Favicon",className:"w-32"})}),e.jsx("div",{className:"mt-5",children:e.jsx("div",{className:"flex gap-2",children:e.jsx("button",{disabled:f||g,className:"admin_btn",children:f||g?"Loading...":n?"Update Favicon":"Add Favicon"})})})]})]})}export{D as default};
