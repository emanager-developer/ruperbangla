import{g as v,n as w,r as n,ak as S,al as y,j as e,_ as E,l as D,J as _,S as l}from"./index-BSZQSoAt.js";function k(){const{id:u}=v(),j=w(),f=n.useRef(null),[t,x]=n.useState([]),[d,c]=n.useState(""),{data:o}=S(u),s=o==null?void 0:o.data;n.useEffect(()=>{s&&c(s==null?void 0:s.description)},[s]);const[b,{isLoading:p}]=y(),N=async a=>{var h,g;a.preventDefault();const m=a.target.title.value;if(d==="")return l.fire("","Project description is required","warning");const r=new FormData;r.append("title",m),r.append("description",d),(t==null?void 0:t.length)>0&&r.append("image",t[0].file);try{const i=await b({id:u,formData:r});(h=i==null?void 0:i.data)!=null&&h.success?(l.fire("","Service edit successfully","success"),a.target.reset(),x([]),c(""),j("/admin/service/all")):(l.fire("",((g=i==null?void 0:i.data)==null?void 0:g.message)||"Something went wrong!","error"),console.log(i))}catch(i){l.fire("","Something went wrong!","error"),console.log(i)}};return e.jsxs("section",{className:"rounded bg-base-100 shadow",children:[e.jsx("div",{className:"flex items-center justify-between border-b p-4 font-medium text-neutral",children:e.jsx("h3",{children:"Edit Service"})}),e.jsxs("form",{className:"p-4",onSubmit:N,children:[e.jsxs("div",{className:"grid items-start gap-4 text-neutral-content sm:grid-cols-2 md:grid-cols-3",children:[e.jsxs("div",{className:"flex flex-col gap-3",children:[e.jsxs("div",{children:[e.jsx("p",{className:"mb-1",children:"Title"}),e.jsx("input",{type:"text",name:"title",required:!0,defaultValue:s==null?void 0:s.title})]}),e.jsxs("div",{children:[e.jsx("p",{className:"mb-1",children:"Image"}),e.jsxs("div",{children:[e.jsx(E,{value:t,onChange:a=>x(a),dataURLKey:"data_url",maxNumber:1,children:({onImageUpload:a,onImageRemove:m,dragProps:r})=>e.jsxs("div",{className:"rounded border border-dashed p-4",...r,children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{onClick:a,className:"w-max cursor-pointer rounded-2xl bg-primary px-4 py-1.5 text-sm text-base-100",children:"Choose Image"}),e.jsx("p",{className:"text-neutral-content",children:"or Drop here"})]}),(t==null?void 0:t.length)>0&&e.jsxs("div",{className:"mt-4",children:[e.jsx("img",{src:t[0].data_url,alt:"",className:"w-24"}),e.jsx("div",{onClick:()=>m(0),className:"absolute right-0 top-0 flex h-7 w-7 cursor-pointer items-center justify-center rounded-full bg-primary text-base-100",children:e.jsx(D,{})})]})]})}),(s==null?void 0:s.image)&&e.jsx("div",{className:"mt-4",children:e.jsx("img",{src:`https://www.api.ruperbangla.com/${s==null?void 0:s.image}`,alt:s==null?void 0:s.title,className:"w-24"})})]})]})]}),e.jsxs("div",{className:"rounded border md:col-span-2",children:[e.jsx("p",{className:"border-b p-3",children:"Description"}),e.jsx("div",{className:"about_details p-4",children:e.jsx(_,{ref:f,value:d,onBlur:a=>c(a)})})]})]}),e.jsx("div",{className:"mt-6",children:e.jsx("button",{className:"admin_btn",disabled:p,children:p?"Editing...":"Edit Service"})}),"-"]})]})}export{k as default};
