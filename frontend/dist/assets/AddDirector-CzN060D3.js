import{n as g,r as c,j as e,J as f,_ as b,l as v,S as i}from"./index-BSZQSoAt.js";import{b as N}from"./directorApi-CIlQ4BJb.js";function y(){const u=g(),x=c.useRef(null),[s,l]=c.useState([]),[p,{isLoading:o}]=N(),[m,h]=c.useState(""),j=async a=>{a.preventDefault();const n=a.target.name.value,d=a.target.designation.value;if((s==null?void 0:s.length)<=0)return i.fire("","Image is required","warning");const r=new FormData;r.append("name",n),r.append("designation",d),r.append("description",m),r.append("image",s[0].file);try{const t=await p(r).unwrap();t!=null&&t.success?(i.fire("","Director added successfully","success"),a.target.reset(),l([]),u("/admin/director/all")):i.fire("","Something went wrong!","error")}catch(t){i.fire("",(t==null?void 0:t.message)||"Failed to add project","error")}};return e.jsxs("section",{className:"rounded bg-base-100 shadow",children:[e.jsx("div",{className:"flex items-center justify-between border-b p-4 font-medium text-neutral",children:e.jsx("h3",{children:"Add Feature Project"})}),e.jsxs("form",{className:"p-4",onSubmit:j,children:[e.jsx("div",{className:"grid items-start gap-4 text-neutral-content sm:grid-cols-2 md:grid-cols-3",children:e.jsxs("div",{className:"flex flex-col gap-3",children:[e.jsxs("div",{children:[e.jsx("p",{className:"mb-1",children:"Name"}),e.jsx("input",{type:"text",name:"name",required:!0})]}),e.jsxs("div",{children:[e.jsx("p",{className:"mb-1",children:"Designation"}),e.jsx("input",{type:"text",name:"designation",required:!0})]}),e.jsxs("div",{className:"rounded border md:col-span-2",children:[e.jsx("p",{className:"border-b p-3",children:"Description"}),e.jsx("div",{className:"about_details p-4",children:e.jsx(f,{ref:x,value:m,onBlur:a=>h(a)})})]}),e.jsxs("div",{children:[e.jsx("p",{className:"mb-1",children:"Image"}),e.jsx("div",{children:e.jsx(b,{value:s,onChange:a=>l(a),dataURLKey:"data_url",children:({onImageUpload:a,onImageRemove:n,dragProps:d})=>e.jsxs("div",{className:"rounded border border-dashed p-4",...d,children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{onClick:a,className:"w-max cursor-pointer rounded-2xl bg-primary px-4 py-1.5 text-sm text-base-100",children:"Choose Image"}),e.jsx("p",{className:"text-neutral-content",children:"or Drop here"})]}),e.jsx("div",{className:`${(s==null?void 0:s.length)>0&&"mt-4"} `,children:s==null?void 0:s.map((r,t)=>e.jsxs("div",{className:"image-item relative",children:[e.jsx("img",{src:r.data_url,alt:"",className:"w-24"}),e.jsx("div",{onClick:()=>n(t),className:"absolute right-0 top-0 flex h-7 w-7 cursor-pointer items-center justify-center rounded-full bg-primary text-base-100",children:e.jsx(v,{})})]},t))})]})})})]})]})}),e.jsx("div",{className:"mt-6",children:e.jsx("button",{className:"admin_btn",disabled:o,children:o?"Loading...":"Add Director"})})]})]})}export{y as default};
