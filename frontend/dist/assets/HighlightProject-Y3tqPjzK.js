import{r as l,H as P,K as C,N as H,j as e,_ as S,l as _,J as L,S as g}from"./index-BSZQSoAt.js";function E(){var x;const j=l.useRef(null),{data:s,isLoading:f}=P(),c=(x=s==null?void 0:s.data)==null?void 0:x._id,[b,{isLoading:N}]=C(),[v,{isLoading:w}]=H(),[a,o]=l.useState([]),[u,m]=l.useState(""),[h,p]=l.useState("");l.useEffect(()=>{s!=null&&s.data&&(m(s.data.title),p(s.data.description),o([{data_url:`https://www.api.ruperbangla.com${s.data.image}`}]))},[s]);const y=async t=>{var n;t.preventDefault();const d=(n=a[0])==null?void 0:n.file,r=new FormData;r.append("title",u),r.append("description",h),d&&r.append("image",d);try{let i;c?i=await v({id:c,formData:r}).unwrap():i=await b(r).unwrap(),i.success&&(o([]),g.fire("",c?"Project updated successfully!":"Project created successfully!","success"))}catch(i){g.fire("",i.message||"Something went wrong!","error")}};return f?e.jsx("p",{children:"Loading..."}):e.jsxs("section",{className:"rounded bg-base-100 shadow",children:[e.jsx("div",{className:"border-b p-4",children:e.jsx("h3",{className:"font-medium text-neutral",children:"Highlight Project"})}),e.jsxs("form",{className:"p-4",onSubmit:y,children:[e.jsxs("div",{className:"grid items-start gap-4 text-neutral-content sm:grid-cols-2 md:grid-cols-3",children:[e.jsxs("div",{className:"flex flex-col gap-3",children:[e.jsxs("div",{children:[e.jsx("p",{className:"mb-1",children:"Title"}),e.jsx("input",{type:"text",name:"title",className:"border",value:u,onChange:t=>m(t.target.value),required:!0})]}),e.jsx("div",{children:e.jsxs("div",{children:[e.jsx("p",{className:"mb-1",children:"Image"}),e.jsx("div",{children:e.jsx(S,{value:a,onChange:t=>o(t),dataURLKey:"data_url",children:({onImageUpload:t,onImageRemove:d,dragProps:r})=>e.jsxs("div",{className:"rounded border border-dashed p-4",...r,children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{onClick:t,className:"w-max cursor-pointer rounded-2xl bg-primary px-4 py-1.5 text-sm text-base-100",children:"Choose Image"}),e.jsx("p",{className:"text-neutral-content",children:"or Drop here"})]}),e.jsx("div",{className:`${(a==null?void 0:a.length)>0&&"mt-4"} `,children:a==null?void 0:a.map((n,i)=>e.jsxs("div",{className:"image-item relative",children:[e.jsx("img",{src:n.data_url,alt:"",className:"h-20 w-20"}),e.jsx("div",{onClick:()=>d(i),className:"absolute right-0 top-0 flex h-7 w-7 cursor-pointer items-center justify-center rounded-full bg-primary text-base-100",children:e.jsx(_,{})})]},i))})]})})})]})})]}),e.jsxs("div",{className:"rounded border md:col-span-2",children:[e.jsx("p",{className:"border-b p-3",children:"Description"}),e.jsx("div",{className:"about_details p-4",children:e.jsx(L,{ref:j,value:h,onBlur:t=>p(t)})})]})]}),e.jsx("div",{className:"mt-6",children:e.jsx("button",{className:"admin_btn",type:"submit",disabled:N||w,children:c?"Update Project":"Create Project"})})]})]})}export{E as default};
