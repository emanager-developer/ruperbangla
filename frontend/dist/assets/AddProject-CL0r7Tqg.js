import{n as C,r as c,B as P,j as e,_ as b,l as g,J as y,S as l}from"./index-BSZQSoAt.js";import{b as D}from"./projectsApi-BgJbOpgZ.js";function q(){const v=C(),N=c.useRef(null),[r,p]=c.useState([]),[t,j]=c.useState([]),[o,h]=c.useState(""),[w,{isLoading:f}]=D(),{data:m}=P(),u=m==null?void 0:m.data,_=async s=>{s.preventDefault();const n=s.target.title.value,d=s.target.location.value,x=s.target.category.value;if((r==null?void 0:r.length)<=0)return l.fire("","Main image is required","warning");if((t==null?void 0:t.length)<=0)return l.fire("","Gallery images are required","warning");if(o==="")return l.fire("","Project description is required","warning");const a=new FormData;a.append("title",n),a.append("category",x),a.append("location",d),a.append("description",o),a.append("mainImage",r[0].file),t.forEach((i,A)=>{a.append("galleryImages",i.file)});try{const i=await w(a).unwrap();i!=null&&i.success&&(l.fire("","Project added successfully","success"),s.target.reset(),p([]),j([]),h(""),v("/admin/project/all"))}catch(i){console.log(i),l.fire("","Something went wrong!","error")}};return e.jsxs("section",{className:"rounded bg-base-100 shadow",children:[e.jsx("div",{className:"flex items-center justify-between border-b p-4 font-medium text-neutral",children:e.jsx("h3",{children:"Add Project"})}),e.jsxs("form",{className:"p-4",onSubmit:_,children:[e.jsxs("div",{className:"grid items-start gap-4 text-neutral-content sm:grid-cols-2 md:grid-cols-3",children:[e.jsxs("div",{className:"flex flex-col gap-3",children:[e.jsxs("div",{children:[e.jsx("p",{className:"mb-1",children:"Title"}),e.jsx("input",{type:"text",name:"title",required:!0})]}),e.jsxs("div",{children:[e.jsx("p",{className:"mb-1",children:"Category"}),e.jsx("select",{name:"category",required:!0,children:u==null?void 0:u.map(s=>e.jsx("option",{value:s==null?void 0:s._id,children:s==null?void 0:s.name},s==null?void 0:s._id))})]}),e.jsxs("div",{children:[e.jsx("p",{className:"mb-1",children:"Location"}),e.jsx("input",{type:"text",name:"location",required:!0})]}),e.jsxs("div",{children:[e.jsx("p",{className:"mb-1",children:"Main Image"}),e.jsx("div",{children:e.jsx(b,{value:r,onChange:s=>p(s),dataURLKey:"data_url",maxNumber:1,children:({onImageUpload:s,onImageRemove:n,dragProps:d})=>e.jsxs("div",{className:"rounded border border-dashed p-4",...d,children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{onClick:s,className:"w-max cursor-pointer rounded-2xl bg-primary px-4 py-1.5 text-sm text-base-100",children:"Choose Image"}),e.jsx("p",{className:"text-neutral-content",children:"or Drop here"})]}),(r==null?void 0:r.length)>0&&e.jsxs("div",{className:"mt-4",children:[e.jsx("img",{src:r[0].data_url,alt:"",className:"w-24"}),e.jsx("div",{onClick:()=>n(0),className:"absolute right-0 top-0 flex h-7 w-7 cursor-pointer items-center justify-center rounded-full bg-primary text-base-100",children:e.jsx(g,{})})]})]})})})]}),e.jsxs("div",{children:[e.jsx("p",{className:"mb-1",children:"Gallery Images"}),e.jsx("div",{children:e.jsx(b,{value:t,onChange:s=>j(s),dataURLKey:"data_url",multiple:!0,maxNumber:10,children:({onImageUpload:s,onImageRemove:n,dragProps:d})=>e.jsxs("div",{className:"rounded border border-dashed p-4",...d,children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{onClick:s,className:"w-max cursor-pointer rounded-2xl bg-primary px-4 py-1.5 text-sm text-base-100",children:"Choose Images"}),e.jsx("p",{className:"text-neutral-content",children:"or Drop here"})]}),e.jsx("div",{className:"mt-4 grid grid-cols-2 gap-4",children:t==null?void 0:t.map((x,a)=>e.jsxs("div",{className:"image-item relative",children:[e.jsx("img",{src:x.data_url,alt:"",className:"w-full"}),e.jsx("div",{onClick:()=>n(a),className:"absolute right-0 top-0 flex h-7 w-7 cursor-pointer items-center justify-center rounded-full bg-primary text-base-100",children:e.jsx(g,{})})]},a))})]})})})]})]}),e.jsxs("div",{className:"rounded border md:col-span-2",children:[e.jsx("p",{className:"border-b p-3",children:"Project Description"}),e.jsx("div",{className:"about_details p-4",children:e.jsx(y,{ref:N,value:o,onBlur:s=>h(s)})})]})]}),e.jsx("div",{className:"mt-6",children:e.jsx("button",{className:"admin_btn",disabled:f,children:f?"Adding...":"Add Project"})})]})]})}export{q as default};
