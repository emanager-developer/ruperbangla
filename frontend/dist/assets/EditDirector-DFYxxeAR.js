import{n as N,g as w,r,j as e,J as D,_ as y,l as E,S as o}from"./index-BSZQSoAt.js";import{c as _,d as S}from"./directorApi-CIlQ4BJb.js";function I(){const g=N(),{id:m}=w(),j=r.useRef(null),{data:d,isLoading:f}=_(m),s=d==null?void 0:d.data,[a,u]=r.useState([]),[p,x]=r.useState(""),[b,{isLoading:h}]=S();r.useEffect(()=>{s&&(u([{data_url:`https://www.api.ruperbangla.com/uploads/${s.image}`}]),x(s==null?void 0:s.description))},[s]);const v=async i=>{i.preventDefault();const l=i.target.name.value,c=i.target.designation.value,n=new FormData;n.append("name",l),n.append("designation",c),n.append("description",p),(a==null?void 0:a.length)>0&&a[0].file&&n.append("image",a[0].file);try{const t=await b({id:m,formData:n}).unwrap();t!=null&&t.success?(o.fire("","Director updated successfully","success"),g("/admin/director/all")):o.fire("","Something went wrong!","error")}catch(t){o.fire("",(t==null?void 0:t.message)||"Failed to update Director","error")}};return e.jsxs("section",{className:"rounded bg-base-100 shadow",children:[e.jsx("div",{className:"flex items-center justify-between border-b p-4 font-medium text-neutral",children:e.jsx("h3",{children:"Edit Director"})}),f?e.jsx("p",{children:"Loading..."}):e.jsxs("form",{className:"p-4",onSubmit:v,children:[e.jsxs("div",{className:"flex flex-col gap-4 text-neutral-content",children:[e.jsxs("div",{className:"grid items-center gap-3 sm:grid-cols-2 md:grid-cols-3",children:[e.jsxs("div",{children:[e.jsx("p",{className:"mb-1",children:"Name"}),e.jsx("input",{type:"text",name:"name",defaultValue:s==null?void 0:s.name,required:!0})]}),e.jsxs("div",{children:[e.jsx("p",{className:"mb-1",children:"Designation"}),e.jsx("input",{type:"text",name:"designation",defaultValue:s==null?void 0:s.designation,required:!0})]}),e.jsxs("div",{className:"rounded border md:col-span-2",children:[e.jsx("p",{className:"border-b p-3",children:"Description"}),e.jsx("div",{className:"about_details p-4",children:e.jsx(D,{ref:j,value:p,onBlur:i=>x(i)})})]})]}),e.jsxs("div",{className:"grid gap-3 rounded border border-dashed p-4 sm:grid-cols-2",children:[e.jsxs("div",{children:[e.jsx("p",{className:"mb-1",children:"Image"}),e.jsx("div",{children:e.jsx(y,{value:a,onChange:i=>u(i),dataURLKey:"data_url",children:({onImageUpload:i,onImageRemove:l,dragProps:c})=>e.jsxs("div",{...c,children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{onClick:i,className:"w-max cursor-pointer rounded-2xl bg-primary px-4 py-1.5 text-sm text-base-100",children:"Choose Image"}),e.jsx("p",{className:"text-neutral-content",children:"or Drop here"})]}),e.jsx("div",{className:`${(a==null?void 0:a.length)>0&&"mt-4"} `,children:a==null?void 0:a.map((n,t)=>e.jsxs("div",{className:"image-item relative",children:[e.jsx("img",{src:n.data_url,alt:"",className:"w-24"}),e.jsx("div",{onClick:()=>l(t),className:"absolute right-0 top-0 flex h-7 w-7 cursor-pointer items-center justify-center rounded-full bg-primary text-base-100",children:e.jsx(E,{})})]},t))})]})})})]}),(s==null?void 0:s.image)&&e.jsx("div",{className:"border-l",children:e.jsx("img",{src:`https://www.api.ruperbangla.com/${s==null?void 0:s.image}`,alt:"",className:"mx-auto w-28"})})]})]}),e.jsx("div",{className:"mt-6",children:e.jsx("button",{className:"admin_btn",disabled:h,children:h?"Updating...":"Edit Director"})})]})]})}export{I as default};
