import{n as f,r as l,ae as v,j as e,_ as b,l as N,J as w,S as i}from"./index-BSZQSoAt.js";function y(){const p=f(),h=l.useRef(null),[s,c]=l.useState([]),[n,o]=l.useState(""),[j,{isLoading:m}]=v(),g=async r=>{var u,x;r.preventDefault();const d=r.target.title.value;if((s==null?void 0:s.length)<=0)return i.fire("","Main image is required","warning");if(n==="")return i.fire("","Project description is required","warning");const a=new FormData;a.append("title",d),a.append("description",n),a.append("image",s[0].file);try{const t=await j(a);(u=t==null?void 0:t.data)!=null&&u.success?(i.fire("","Service added successfully","success"),r.target.reset(),c([]),o(""),p("/admin/service/all")):(i.fire("",((x=t==null?void 0:t.data)==null?void 0:x.message)||"Something went wrong!","error"),console.log(t))}catch(t){i.fire("","Something went wrong!","error"),console.log(t)}};return e.jsxs("section",{className:"rounded bg-base-100 shadow",children:[e.jsx("div",{className:"flex items-center justify-between border-b p-4 font-medium text-neutral",children:e.jsx("h3",{children:"Add Service"})}),e.jsxs("form",{className:"p-4",onSubmit:g,children:[e.jsxs("div",{className:"grid items-start gap-4 text-neutral-content sm:grid-cols-2 md:grid-cols-3",children:[e.jsxs("div",{className:"flex flex-col gap-3",children:[e.jsxs("div",{children:[e.jsx("p",{className:"mb-1",children:"Title"}),e.jsx("input",{type:"text",name:"title",required:!0})]}),e.jsxs("div",{children:[e.jsx("p",{className:"mb-1",children:"Image"}),e.jsx("div",{children:e.jsx(b,{value:s,onChange:r=>c(r),dataURLKey:"data_url",maxNumber:1,children:({onImageUpload:r,onImageRemove:d,dragProps:a})=>e.jsxs("div",{className:"rounded border border-dashed p-4",...a,children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{onClick:r,className:"w-max cursor-pointer rounded-2xl bg-primary px-4 py-1.5 text-sm text-base-100",children:"Choose Image"}),e.jsx("p",{className:"text-neutral-content",children:"or Drop here"})]}),(s==null?void 0:s.length)>0&&e.jsxs("div",{className:"mt-4",children:[e.jsx("img",{src:s[0].data_url,alt:"",className:"w-24"}),e.jsx("div",{onClick:()=>d(0),className:"absolute right-0 top-0 flex h-7 w-7 cursor-pointer items-center justify-center rounded-full bg-primary text-base-100",children:e.jsx(N,{})})]})]})})})]})]}),e.jsxs("div",{className:"rounded border md:col-span-2",children:[e.jsx("p",{className:"border-b p-3",children:"Description"}),e.jsx("div",{className:"about_details p-4",children:e.jsx(w,{ref:h,value:n,onBlur:r=>o(r)})})]})]}),e.jsx("div",{className:"mt-6",children:e.jsx("button",{className:"admin_btn",disabled:m,children:m?"Adding...":"Add Service"})})]})]})}export{y as default};
