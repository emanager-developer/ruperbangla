import{n as f,r as l,a3 as g,j as e,_ as b,l as v,J as N,S as i}from"./index-BSZQSoAt.js";function y(){const x=f(),p=l.useRef(null),[s,c]=l.useState([]),[n,o]=l.useState(""),[j,{isLoading:u}]=g(),h=async t=>{t.preventDefault();const d=t.target.title.value;if((s==null?void 0:s.length)<=0)return i.fire("","Image is required","warning");if(n==="")return i.fire("","Description is required","warning");const a=new FormData;a.append("title",d),a.append("description",n),a.append("image",s[0].file);try{const r=await j(a).unwrap();r!=null&&r.success?(i.fire("","Feature project added successfully","success"),t.target.reset(),c([]),o(""),x("/admin/featuresProject/all")):i.fire("","Something went wrong!","error")}catch(r){i.fire("",(r==null?void 0:r.message)||"Failed to add project","error")}};return e.jsxs("section",{className:"rounded bg-base-100 shadow",children:[e.jsx("div",{className:"flex items-center justify-between border-b p-4 font-medium text-neutral",children:e.jsx("h3",{children:"Add Feature Project"})}),e.jsxs("form",{className:"p-4",onSubmit:h,children:[e.jsxs("div",{className:"grid items-start gap-4 text-neutral-content sm:grid-cols-2 md:grid-cols-3",children:[e.jsxs("div",{className:"flex flex-col gap-3",children:[e.jsxs("div",{children:[e.jsx("p",{className:"mb-1",children:"Title"}),e.jsx("input",{type:"text",name:"title",required:!0})]}),e.jsxs("div",{children:[e.jsx("p",{className:"mb-1",children:"Image"}),e.jsx("div",{children:e.jsx(b,{value:s,onChange:t=>c(t),dataURLKey:"data_url",children:({onImageUpload:t,onImageRemove:d,dragProps:a})=>e.jsxs("div",{className:"rounded border border-dashed p-4",...a,children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{onClick:t,className:"w-max cursor-pointer rounded-2xl bg-primary px-4 py-1.5 text-sm text-base-100",children:"Choose Image"}),e.jsx("p",{className:"text-neutral-content",children:"or Drop here"})]}),e.jsx("div",{className:`${(s==null?void 0:s.length)>0&&"mt-4"} `,children:s==null?void 0:s.map((r,m)=>e.jsxs("div",{className:"image-item relative",children:[e.jsx("img",{src:r.data_url,alt:"",className:"w-24"}),e.jsx("div",{onClick:()=>d(m),className:"absolute right-0 top-0 flex h-7 w-7 cursor-pointer items-center justify-center rounded-full bg-primary text-base-100",children:e.jsx(v,{})})]},m))})]})})})]})]}),e.jsxs("div",{className:"rounded border md:col-span-2",children:[e.jsx("p",{className:"border-b p-3",children:"Project Description"}),e.jsx("div",{className:"about_details p-4",children:e.jsx(N,{ref:p,value:n,onBlur:t=>o(t)})})]})]}),e.jsx("div",{className:"mt-6",children:e.jsx("button",{className:"admin_btn",disabled:u,children:u?"Loading...":"Add Project"})})]})]})}export{y as default};
