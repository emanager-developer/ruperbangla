import{r as l,h as k,i as P,k as R,j as e,_ as $,l as F,m as H,J,S as _}from"./index-BSZQSoAt.js";function O(){var A,C;const D=l.useRef(null),[n,o]=l.useState([]),[h,p]=l.useState(""),[f,u]=l.useState(""),[j,m]=l.useState(""),[g,x]=l.useState(""),[b,v]=l.useState(""),[N,y]=l.useState(!1),{data:a,isLoading:L}=k(),[T,{isLoading:S}]=P(),[I,{isLoading:w}]=R();l.useEffect(()=>{if(a&&a.data){const s=a.data;p(s.heading),u(s.title),m(s.subTitle),x(s.description),o([{data_url:`https://www.api.ruperbangla.com${s.image}`}])}},[a]);const E=async s=>{var c,d,U;s.preventDefault();const r=(c=n[0])==null?void 0:c.file,t=new FormData;t.append("heading",h),t.append("title",f),t.append("subTitle",j),t.append("description",g),t.append("profileIsDeleted",N),r&&t.append("image",r),b&&t.append("profileDoc",b);try{let i;(d=a==null?void 0:a.data)!=null&&d._id?i=await I({id:a.data._id,formData:t}).unwrap():i=await T(t).unwrap(),i!=null&&i.success&&(_.fire("","About Us saved successfully","success"),y(!1),p(""),u(""),m(""),x(""),v(""),o([]))}catch(i){_.fire("",((U=i==null?void 0:i.data)==null?void 0:U.message)||"Operation failed","error")}};return L?e.jsx("p",{children:"Loading..."}):e.jsxs("section",{className:"rounded bg-base-100 shadow",children:[e.jsx("div",{className:"border-b p-4",children:e.jsx("h3",{className:"font-medium text-neutral",children:"About Info"})}),e.jsxs("form",{onSubmit:E,className:"p-4",children:[e.jsxs("div",{className:"grid items-start gap-4 text-neutral-content sm:grid-cols-2 md:grid-cols-3",children:[e.jsxs("div",{className:"flex flex-col gap-3",children:[e.jsxs("div",{children:[e.jsx("p",{className:"mb-1",children:"Heading"}),e.jsx("input",{type:"text",name:"heading",className:"border",value:h,onChange:s=>p(s.target.value)})]}),e.jsxs("div",{children:[e.jsx("p",{className:"mb-1",children:"Title"}),e.jsx("input",{type:"text",name:"title",className:"border",value:f,onChange:s=>u(s.target.value)})]}),e.jsxs("div",{children:[e.jsx("p",{className:"mb-1",children:"Sub Title"}),e.jsx("input",{type:"text",name:"subTitle",className:"border",value:j,onChange:s=>m(s.target.value)})]}),e.jsx("div",{children:e.jsxs("div",{children:[e.jsx("p",{className:"mb-1",children:"Image"}),e.jsx("div",{children:e.jsx($,{value:n,onChange:s=>o(s),dataURLKey:"data_url",children:({onImageUpload:s,onImageRemove:r,dragProps:t})=>e.jsxs("div",{className:"rounded border border-dashed p-4",...t,children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{onClick:s,className:"w-max cursor-pointer rounded-2xl bg-primary px-4 py-1.5 text-sm text-base-100",children:"Choose Image"}),e.jsx("p",{className:"text-neutral-content",children:"or Drop here"})]}),e.jsx("div",{className:`${(n==null?void 0:n.length)>0&&"mt-4"} `,children:n==null?void 0:n.map((c,d)=>e.jsxs("div",{className:"image-item relative",children:[e.jsx("img",{src:c.data_url,alt:"",className:"h-20 w-20"}),e.jsx("div",{onClick:()=>r(d),className:"absolute right-0 top-0 flex h-7 w-7 cursor-pointer items-center justify-center rounded-full bg-primary text-base-100",children:e.jsx(F,{})})]},d))})]})})})]})}),e.jsxs("div",{children:[e.jsxs("p",{className:"mb-1",children:["Profile - ",e.jsx("small",{children:"(only pdf)"})]}),e.jsx("input",{type:"file",name:"profile",accept:"application/pdf",onChange:s=>v(s.target.files[0])}),!N&&((A=a==null?void 0:a.data)==null?void 0:A.profileDoc)&&e.jsxs("div",{className:"mt-2 flex items-center gap-2",children:[(C=a==null?void 0:a.data)==null?void 0:C.profileDoc,e.jsx("div",{className:"cursor-pointer text-sm text-red-500",onClick:()=>y(!0),children:e.jsx(H,{})})]})]})]}),e.jsxs("div",{className:"rounded border md:col-span-2",children:[e.jsx("p",{className:"border-b p-3",children:"Description"}),e.jsx("div",{className:"about_details p-4",children:e.jsx(J,{ref:D,value:g,onBlur:s=>x(s)})})]})]}),e.jsx("div",{className:"mt-6",children:e.jsx("button",{type:"submit",className:"admin_btn",disabled:S||w,children:S||w?"Saving...":"Save"})})]})]})}export{O as default};
